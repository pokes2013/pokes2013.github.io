






# Python OS 模块常用方法详解（完整版）
## 一、OS 模块简介
Python 的 `os` 模块是 **与操作系统交互的核心内置模块**，无需额外安装，直接导入即可使用。该模块封装了操作系统的文件/目录操作、路径处理、系统环境变量、进程管理等核心功能，能够实现跨平台的文件系统操作，是Python文件处理、自动化脚本开发的必备模块。

核心特点：
1. 内置模块，`import os` 即可使用，零依赖；
2. 提供操作系统的底层接口，功能覆盖文件/目录全生命周期操作；
3. 部分方法具备跨平台兼容性（Windows/Mac/Linux通用）。

---

## 二、前置知识：绝对路径 & 相对路径（必懂）
所有文件/目录操作的核心都是「路径」，使用os模块前必须分清两个概念，**90%的路径报错都源于二者混淆**：
### ✅ 绝对路径 (Absolute Path)
从操作系统的「根目录」开始的完整路径，路径是**唯一且固定**的，能精准定位到任意文件/目录。
- Windows 示例：`C:\Python311\Lib\os.py`、`D:\project\test.txt`
- Mac/Linux 示例：`/usr/local/python3/lib/os.py`、`/Users/xxx/Documents/note.md`

### ✅ 相对路径 (Relative Path)
相对于「当前Python程序运行的目录」的路径，路径是**相对的、动态的**，写法更简洁，开发中最常用。
- 核心标识：
  - `.`  表示「当前目录」（可省略）
  - `..` 表示「上一级目录」
- 示例：`./data.json`（当前目录下的文件）、`../img/logo.png`（上一级目录的img文件夹下的文件）

---

## 三、获取当前相关路径（高频）
### 1. `os.getcwd()` 【重中之重】
- 功能：获取 **当前Python程序的工作目录（Current Working Directory）**，返回该目录的**绝对路径**
- 语法：`os.getcwd()` 无参数
- 返回值：字符串类型的绝对路径
- 示例：
```python
import os
# 获取当前工作目录
current_path = os.getcwd()
print("当前工作目录：", current_path)
```

### 2. `os.listdir(path='.')`
- 功能：列出指定目录下的「所有文件 + 所有子目录」的名称，返回列表；默认参数为 `.` 即当前目录
- 语法：`os.listdir(目标路径)`
- 返回值：列表，元素为文件名/目录名的字符串
- 示例：
```python
import os
# 列出当前目录下所有内容
current_dir_content = os.listdir()
print("当前目录内容：", current_dir_content)

# 列出指定绝对路径下的内容
target_content = os.listdir("D:\\project")
print("指定目录内容：", target_content)
```

---

## 四、切换工作目录（高频）
### `os.chdir(path)` 【重中之重】
- 功能：**改变当前Python程序的工作目录**，切换到指定的 `path` 路径下
- 语法：`os.chdir(目标路径)`，参数可以是绝对路径/相对路径
- 无返回值，路径不存在会抛出 `FileNotFoundError` 异常
- 核心理解：切换后，所有后续的「相对路径操作」都会基于新目录执行
- 示例：
```python
import os
print("切换前工作目录：", os.getcwd())  # 比如输出：C:\Users\admin

# 切换到D盘的project目录（绝对路径）
os.chdir("D:\\project")
print("切换后工作目录：", os.getcwd())  # 输出：D:\project

# 切换到当前目录的子目录test（相对路径）
os.chdir("./test")
print("再次切换后：", os.getcwd())  # 输出：D:\project\test

# 切换到上一级目录
os.chdir("..")
print("返回上一级：", os.getcwd())  # 输出：D:\project
```

---

## 五、创建目录（文件夹）相关方法
### 1. `os.mkdir(path, mode=0o777)` 【常用】
- 功能：创建「单层目录」（文件夹），**只能创建一级目录**
- 关键注意点：
  1. 如果要创建的目录**已经存在**，会抛出 `FileExistsError` 异常；
  2. 如果目标路径中的「上级目录不存在」，会抛出 `FileNotFoundError` 异常；
  3. `mode` 参数是权限设置，Windows系统无效，Mac/Linux生效，默认即可。
- 示例：
```python
import os
# 在当前目录创建单层目录：test_dir
os.mkdir("test_dir")

# 报错场景1：目录已存在
# os.mkdir("test_dir")  # FileExistsError

# 报错场景2：上级目录不存在（想创建a/b，但a不存在）
# os.mkdir("a\\b")  # FileNotFoundError
```

### 2. `os.makedirs(path, mode=0o777, exist_ok=False)` 【重中之重】
- 功能：创建「多层递归目录」，**可以一次性创建多级目录**，开发中优先用这个！
- 核心参数说明：
  1. `exist_ok=False`：默认值，如果目录已存在，抛出 `FileExistsError`；设置为 `True` 时，目录已存在也不会报错（推荐设置）；
  2. 自动创建路径中所有不存在的上级目录，完美解决 `os.mkdir` 的痛点。
- 示例：
```python
import os
# 一次性创建多级目录：parent_dir -> child_dir -> grand_dir
os.makedirs("parent_dir/child_dir/grand_dir", exist_ok=True)

# 目录已存在时，设置exist_ok=True不会报错
os.makedirs("parent_dir/child_dir", exist_ok=True)
```

---

## 六、删除文件/目录相关方法
### ✅ 注意事项（删库跑路预警）
> os模块的删除操作是 **永久删除**，不会进入回收站/废纸篓，删除后无法恢复！生产环境务必谨慎使用，尤其是批量删除！

### 1. `os.remove(path)`
- 功能：**删除指定路径的「文件」**，只能删文件，不能删目录！
- 异常：路径不存在/路径是目录，都会抛出 `FileNotFoundError`
- 示例：
```python
import os
# 删除当前目录下的 test.txt 文件
os.remove("test.txt")
```

### 2. `os.rmdir(path)`
- 功能：删除「单层空目录」，**两个核心限制**：
  1. 只能删除「空文件夹」，目录中有文件/子目录则抛出 `OSError`；
  2. 只能删除一级目录，不能递归删除多级目录。
- 示例：
```python
import os
# 删除空目录 test_dir
os.rmdir("test_dir")

# 报错场景：目录非空
# os.rmdir("parent_dir")  # OSError: [WinError 145] 目录不是空的
```

### 3. `os.removedirs(path)`
- 功能：删除「多层空目录」，递归删除空文件夹，删除规则：
  1. 从指定的最内层目录开始删除；
  2. 删除后如果上级目录也变成空目录，则继续删除上级目录，直到遇到非空目录为止。
- 示例：
```python
import os
# 先创建多级空目录
os.makedirs("a/b/c", exist_ok=True)
# 递归删除：先删c → 再删b → 再删a
os.removedirs("a/b/c")
```

---

## 七、判断路径类型 & 路径是否存在（高频必备）
这组方法是**文件/目录操作的前置校验核心**，几乎所有文件处理脚本都会用到，返回值都是 **布尔值（True/False）**

### 1. `os.path.exists(path)` 【最常用】
- 功能：判断指定的「路径」是否存在（无论该路径是 文件 还是 目录）
- 核心用途：操作文件/目录前先判断是否存在，避免报错
```python
import os
print(os.path.exists("test.txt"))   # True：文件存在
print(os.path.exists("test_dir"))   # True：目录存在
print(os.path.exists("not_exist"))  # False：路径不存在
```

### 2. `os.path.isfile(path)`
- 功能：判断指定路径是否是一个「存在的文件」
```python
import os
print(os.path.isfile("test.txt"))  # True：是文件且存在
print(os.path.isfile("test_dir"))  # False：是目录不是文件
```

### 3. `os.path.isdir(path)`
- 功能：判断指定路径是否是一个「存在的目录」
```python
import os
print(os.path.isdir("test_dir"))  # True：是目录且存在
print(os.path.isdir("test.txt"))  # False：是文件不是目录
```

---

## 八、路径拼接与拆解（跨平台核心，重中之重）
### ✅ 痛点说明
不同操作系统的「路径分隔符」不同：
- Windows 系统：路径分隔符是 `\` （反斜杠）
- Mac/Linux 系统：路径分隔符是 `/` （正斜杠）

如果手动写死分隔符（比如 `a\\b\\c`），代码在Windows能运行，放到Mac/Linux就会报错，**完全不具备跨平台性**。

### 1. `os.path.join(path1, path2, ...)` 【封神级方法，必用】
- 核心功能：**智能拼接多个路径片段，自动适配当前操作系统的路径分隔符**，完美解决跨平台问题！
- 特性：
  1. 接收任意多个路径参数，按顺序拼接成完整路径；
  2. 自动识别操作系统，添加对应的分隔符；
  3. 如果拼接的参数中有「绝对路径」，则之前的路径片段会被忽略，从绝对路径重新拼接。
- 示例（跨平台无差别）：
```python
import os
# 拼接：当前目录 + data + json + test.json
file_path = os.path.join(os.getcwd(), "data", "json", "test.json")
print(file_path)
# Windows输出：C:\xxx\当前目录\data\json\test.json
# Mac输出：/Users/xxx/当前目录/data/json/test.json

# 拼接目录路径
dir_path = os.path.join("parent", "child", "grand")
print(dir_path)
```

### 2. `os.path.split(path)`
- 功能：将一个完整路径 **拆分为「目录部分」和「文件名/目录名部分」**
- 返回值：元组 `(目录路径, 文件名/目录名)`
- 示例：
```python
import os
path = "D:\\project\\test.py"
split_result = os.path.split(path)
print(split_result)  # ('D:\\project', 'test.py')

# 对目录路径拆分
dir_path = "D:\\project\\data\\json"
print(os.path.split(dir_path))  # ('D:\\project\\data', 'json')
```

### 3. `os.path.basename(path)`
- 功能：获取路径中的「文件名/目录名」（等价于 `os.path.split(path)[1]`）
```python
import os
print(os.path.basename("D:\\project\\test.py"))  # test.py
print(os.path.basename("D:\\project\\data"))     # data
```

### 4. `os.path.dirname(path)`
- 功能：获取路径中的「上级目录路径」（等价于 `os.path.split(path)[0]`）
```python
import os
print(os.path.dirname("D:\\project\\test.py"))  # D:\\project
print(os.path.dirname("D:\\project\\data\\json"))  # D:\\project\\data
```

---

## 九、获取文件大小 & 其他常用路径方法
### 1. `os.path.getsize(path)`
- 功能：获取指定文件的**大小**，单位是 **字节(Byte)**
- 注意：只能获取文件大小，不能获取目录大小（目录会返回固定值，无意义）
- 示例：
```python
import os
# 获取test.txt的文件大小
file_size = os.path.getsize("test.txt")
print(f"文件大小：{file_size} 字节")  # 输出示例：文件大小：1024 字节
```

### 2. `os.path.abspath(path)`
- 功能：将「相对路径」转换为「绝对路径」，开发中用于路径标准化
```python
import os
# 相对路径转绝对路径
abs_path = os.path.abspath("./test.txt")
print(abs_path)  # 输出：C:\xxx\当前目录\test.txt
```

### 3. `os.path.splitext(path)`
- 功能：拆分文件路径的「文件名」和「扩展名」，处理文件格式必备
- 返回值：元组 `(文件名, 扩展名)`
- 示例：
```python
import os
print(os.path.splitext("test.txt"))    # ('test', '.txt')
print(os.path.splitext("data.json"))   # ('data', '.json')
print(os.path.splitext("img/logo.png"))# ('img/logo', '.png')
```

---

## 十、OS模块高频方法总结（按使用频率排序，必背）
### ✅ 路径相关（核心）
1. `os.getcwd()` - 获取当前工作目录
2. `os.path.join()` - 跨平台路径拼接（最常用）
3. `os.chdir()` - 切换工作目录
4. `os.path.exists()` - 判断路径是否存在
5. `os.path.abspath()` - 相对路径转绝对路径

### ✅ 文件/目录判断（必备）
1. `os.path.isfile()` - 判断是否为文件
2. `os.path.isdir()` - 判断是否为目录

### ✅ 目录操作（高频）
1. `os.makedirs()` - 创建多级目录（优先用）
2. `os.mkdir()` - 创建单层目录
3. `os.listdir()` - 列出目录内容

### ✅ 文件/目录删除（谨慎）
1. `os.remove()` - 删除文件
2. `os.rmdir()` - 删除空目录
3. `os.removedirs()` - 递归删除空目录

### ✅ 路径拆解（常用）
1. `os.path.split()` - 拆分目录和文件名
2. `os.path.basename()` - 获取文件名/目录名
3. `os.path.dirname()` - 获取上级目录
4. `os.path.splitext()` - 拆分文件名和扩展名

---

## 十一、综合实战案例（经典场景，直接复用）
需求：创建一个脚本，实现「判断目录是否存在→不存在则创建→拼接文件路径→写入文件」的完整流程
```python
import os

# 1. 定义基础目录和文件名
base_dir = "data"
sub_dir = "log"
file_name = "20260114.log"

# 2. 拼接完整的目录路径
target_dir = os.path.join(os.getcwd(), base_dir, sub_dir)

# 3. 判断目录是否存在，不存在则创建
if not os.path.exists(target_dir):
    os.makedirs(target_dir, exist_ok=True)
    print(f"目录创建成功：{target_dir}")
else:
    print(f"目录已存在：{target_dir}")

# 4. 拼接完整的文件路径
target_file = os.path.join(target_dir, file_name)

# 5. 写入文件内容
with open(target_file, "w", encoding="utf-8") as f:
    f.write("Python OS模块实战案例 - 日志内容\n")
    f.write(f"文件路径：{target_file}")

print(f"文件写入成功：{target_file}")
print(f"文件大小：{os.path.getsize(target_file)} 字节")
```

---
### 总结
1. `os` 模块是Python操作操作系统的核心，无需安装，`import os` 即用，核心能力是文件/目录/路径处理；
2. 路径操作优先用 `os.path.join()` 保证跨平台，创建目录优先用 `os.makedirs()` 支持多级创建；
3. 所有文件/目录操作前，建议用 `os.path.exists()` 做存在性校验，避免报错；
4. 删除操作是永久删除，务必谨慎，生产环境建议增加二次确认；
5. 高频方法一定要熟记，是Python自动化、爬虫、数据分析的基础必备技能。




## 十二、OS模块常用方法汇总

‍

对操作系统进行调用的

```python
os.getcwd()，获取当前工作目录，即当前python脚本工作的目录路径  
os.chdir("dirname")，改变当前脚本工作目录；相当于shell下cd  
os.curdir，返回当前目录：(.)  
os.pardir，获取当前目录的父目录字符串名：(.....)  
os.makedirs('dirname1/dirname2‘）可生成多层递归目录  
os.removedirs('dirname1)，若自录为空，则删除，并递归到上一级目录，如若也为空，则删除，依此类推  
os.mkdir('dirname')，生成单级目录；相当于she11中mkdir dirn;  
os.rmdir('dirname)，删除单级空目录，若目录不为空则无法删除，报错；相当于shell中rmdir dirname  
Ds.listdir('dirname')，列出指定目录下的所有文件和子目录，包括隐藏文件，并以列表方式打印  
os.remove()，删除一个文件  
os.rename("oldname","newname")，重命名文件/目录  
os.stat('path/filename')，获取文件/目录信息  
os.sep，输出操作系统特定的路径分隔符，win下为"\\",Linux下为"/"  
os.linesep,输出当前平台使用的行终止符，win下为"\t\n",Linux下为"\n"  
os . pathsep, 输出用于分割文件路径的字符串  
Ds.name,输出字符串指示当前使用平台。win->'nt';Linux->'posix'  
Ds.system("bash comiand"),运行shell命令，直接显示  
os . environ ，获取系统环境变量  
os.path.abspath(path)，返回path规范化的绝对路径  
os.path.split(path)，将path分割成目录和文件名二元组返回  
Ds.path.dirname(path)，返回path的目录。其实就是os.path.split(path)的第一个元素  
os.path.basename(path)，返回path最后的文件名。如何path以/或\结尾，那么就会返回空值。即os.path.split(path)的身  
Ds.path.exists(path)，如果path存在，返回True;如果path不存在，返回False  
os.path.isabs(path)，如果path是绝对路径，返回True  
Ds.path.isfile(path)，如果path是一个存在的文件，返回True。否则返回False  
os . path . isdir ( path ) ，如果path是一个存在的目录，则返回True。否则返回False  
os . path . join ，将多个路径组合后返回，第一个绝对路径之前的参数将被忽略  
os . path . getatime ( path ) ; 回path所指向的文件或者目录的最后存取时间  
os . path . getmtime ( path ) 返回path所指向的文件或者目录的最后修改时间
```

‍
