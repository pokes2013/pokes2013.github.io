》》01.系统安装与环境搭建

# Linux 系统安装与环境搭建（零基础到实战）

Linux 系统因其稳定性、安全性和开源特性，广泛应用于服务器、嵌入式设备及开发环境。本文将从 **系统选型、安装步骤、基础配置、开发 / 运维环境搭建** 四个核心维度，结合实战场景（如服务器部署、开发机配置），提供详细的操作指南，适配零基础入门到进阶使用。

## 一、Linux 系统选型（按需选择）

不同场景适合不同的 Linux 发行版，优先推荐以下主流版本：

| 发行版          | 特点                             | 适用场景                               | 推荐指数 |
| --------------- | -------------------------------- | -------------------------------------- | -------- |
| Ubuntu 22.04    | 界面友好、软件生态丰富、社区活跃 | 桌面开发机、新手入门、轻量服务器       | ⭐⭐⭐⭐⭐    |
| CentOS Stream 9 | 稳定性强、企业级支持、兼容 RHEL  | 生产服务器、运维部署、长期运行服务     | ⭐⭐⭐⭐     |
| Debian 12       | 轻量、稳定、开源纯粹             | 嵌入式设备、追求极简的服务器 / 桌面    | ⭐⭐⭐⭐     |
| Fedora 39       | 前沿特性、支持最新硬件           | 技术尝鲜、开发者桌面（兼容 RHEL 生态） | ⭐⭐⭐⭐     |
| Kali Linux      | 预装渗透测试工具                 | 网络安全学习、渗透测试实战             | ⭐⭐⭐⭐     |

### 选型建议：

- 新手 / 桌面用户：优先 **Ubuntu 22.04**（图形化界面友好，教程丰富）。
- 服务器 / 生产环境：优先 **CentOS Stream 9**（长期支持，企业级稳定性）。
- 网络安全学习：直接选择 **Kali Linux**（无需额外安装大量工具）。

## 二、Linux 系统安装（以 Ubuntu 22.04 为例）

### 2.1 准备工作

1. **硬件要求**：
   - 内存：至少 2GB（推荐 4GB+）。
   - 硬盘：至少 20GB 空闲空间（推荐 50GB+）。
   - 支持 BIOS/UEFI 启动（大部分现代电脑都满足）。
2. **软件下载**：
   - 镜像文件：从 [Ubuntu 官网](https://ubuntu.com/download/desktop) 下载 Ubuntu 22.04 LTS 桌面版（LTS 为长期支持版本，更稳定）。
   - 制作启动盘：使用 [Rufus](https://rufus.ie/)（Windows）或 [BalenaEtcher](https://www.balena.io/etcher/)（跨平台），将镜像写入 U 盘（8GB+）。
3. **备份数据**：若为双系统安装，提前备份 Windows 重要文件（避免分区失误导致数据丢失）。

### 2.2 安装步骤（图形化界面）

1. **启动电脑并选择 U 盘启动**：
   - 重启电脑，开机时按快捷键（F2/F10/F12，不同品牌电脑不同，屏幕会提示）进入 BIOS/UEFI 设置。
   - 在启动项中选择 U 盘（通常显示为 USB-HDD），保存并重启。
2. **Ubuntu 安装向导**：
   - 选择语言：推荐 “中文（简体）”。
   - 选择安装类型：
     - 新手推荐 “安装 Ubuntu 并与 Windows 共存”（自动分区，安全便捷）。
     - 进阶用户可选择 “其他选项” 手动分区（推荐分区方案：/boot 2GB、swap 交换分区（等于内存大小）、/ 根分区（剩余空间））。
   - 选择时区：默认 “上海” 即可。
   - 键盘布局：默认 “英语（美国）” 或选择 “中文（中国）”。
   - 创建用户：设置用户名、主机名、密码（密码建议复杂且易记）。
   - 等待安装：过程约 10-30 分钟（取决于硬件速度），安装完成后重启电脑。
3. **首次启动配置**：
   - 重启后移除 U 盘，进入 Ubuntu 系统，完成初始设置（如更新软件、安装显卡驱动）。

### 2.3 服务器版安装（CentOS Stream 9）

服务器版无图形化界面，安装核心差异：

1. 下载 [CentOS Stream 9 镜像](https://centos.org/download/)（选择 Minimal ISO，体积更小）。
2. 启动后选择 “Install CentOS Stream 9”，设置语言、时区。
3. 手动分区（推荐方案）：
   - /boot：2GB（ext4 格式）。
   - swap：4GB（内存 ≤4GB 时设为内存 2 倍，内存 >4GB 时设为 4-8GB）。
   - /：剩余空间（ext4 格式）。
4. 设置 root 密码（必须设置，服务器管理核心账户）和普通用户。
5. 安装完成后重启，通过 SSH 工具（如 Xshell、Putty）远程连接管理。

## 三、Linux 基础配置（必备操作）

安装完成后，需进行基础配置以提升使用体验和安全性。

### 3.1 更换国内软件源（解决下载慢问题）

Linux 默认软件源在国外，更换国内源（如阿里云、清华源）可大幅提升下载速度。

#### Ubuntu 更换源：

1. 备份默认源：

   ```bash
   sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak  # 备份原文件
   ```

   

2. 编辑源文件：

   ```bash
   sudo nano /etc/apt/sources.list  # 打开编辑界面
   ```

   

3. 删除所有内容，粘贴阿里云源（22.04 版本）：

   ```plaintext
   deb http://mirrors.aliyun.com/ubuntu/ jammy main restricted universe multiverse
   deb-src http://mirrors.aliyun.com/ubuntu/ jammy main restricted universe multiverse
   deb http://mirrors.aliyun.com/ubuntu/ jammy-security main restricted universe multiverse
   deb-src http://mirrors.aliyun.com/ubuntu/ jammy-security main restricted universe multiverse
   deb http://mirrors.aliyun.com/ubuntu/ jammy-updates main restricted universe multiverse
   deb-src http://mirrors.aliyun.com/ubuntu/ jammy-updates main restricted universe multiverse
   deb http://mirrors.aliyun.com/ubuntu/ jammy-backports main restricted universe multiverse
   deb-src http://mirrors.aliyun.com/ubuntu/ jammy-backports main restricted universe multiverse
   ```

   

4. 更新软件包列表：

   ```bash
   sudo apt update  # 更新源索引
   sudo apt upgrade -y  # 升级已安装软件（-y 自动确认）
   ```

#### CentOS Stream 9 更换源：

1. 备份默认源：

   ```bash
   sudo cp /etc/yum.repos.d/CentOS-Stream-AppStream.repo /etc/yum.repos.d/CentOS-Stream-AppStream.repo.bak
   sudo cp /etc/yum.repos.d/CentOS-Stream-BaseOS.repo /etc/yum.repos.d/CentOS-Stream-BaseOS.repo.bak
   ```

   

2. 替换为阿里云源（编辑上述两个文件，将 `baseurl` 替换为阿里云地址）：

   - 以 `CentOS-Stream-AppStream.repo` 为例：

     ```bash
     sudo nano /etc/yum.repos.d/CentOS-Stream-AppStream.repo
     ```

     将

     ```
     baseurl
     ```

     改为：

     ```plaintext
     baseurl=http://mirrors.aliyun.com/centos-stream/$releasever/AppStream/$basearch/os/
     ```

     

3. 清理并更新 yum 缓存：

   ```bash
   sudo dnf clean all  # 清理缓存
   sudo dnf makecache  # 生成新缓存
   sudo dnf update -y  # 升级软件
   ```

### 3.2 安装常用工具

#### 基础工具（Ubuntu/CentOS 通用）：

```bash
# Ubuntu
sudo apt install -y vim git wget curl net-tools zip unzip  # vim 编辑器、git 版本控制、wget/curl 下载工具等

# CentOS
sudo dnf install -y vim git wget curl net-tools zip unzip
```

#### 图形化界面工具（仅 Ubuntu 桌面版）：

```bash
sudo apt install -y chrome-gnome-shell  # 浏览器插件支持
sudo apt install -y gnome-tweaks  # 系统美化工具（调整主题、图标等）
```

### 3.3 配置 SSH 服务（远程连接必备）

服务器版默认安装 SSH，桌面版需手动安装：

1. 安装 SSH 服务：

   ```bash
   # Ubuntu
   sudo apt install -y openssh-server
   
   # CentOS
   sudo dnf install -y openssh-server
   ```

   

2. 启动并设置开机自启：

   ```bash
   sudo systemctl start sshd  # 启动服务
   sudo systemctl enable sshd  # 开机自启
   sudo systemctl status sshd  # 查看服务状态（显示 active 则正常）
   ```

   

3. 配置 SSH 安全（可选，推荐）：

   - 编辑配置文件：

     ```bash
     sudo vim /etc/ssh/sshd_config
     ```

     

   - 禁用 root 直接登录（避免暴力破解）：

     ```plaintext
     PermitRootLogin no  # 改为 no
     ```

     

   - 重启 SSH 服务生效：

     ```bash
     sudo systemctl restart sshd
     ```

     

4. 远程连接：

   - 查看 Linux IP 地址：

     ```bash
     ip addr  # 找到 inet 后的 IP（如 192.168.1.100）
     ```

     

   - 使用 Xshell、Putty 或终端连接：

     ```bash
     ssh 用户名@IP地址  # 如 ssh ubuntu@192.168.1.100
     ```

     

### 3.4 关闭防火墙（测试环境，可选）

生产环境需配置防火墙规则，测试环境可临时关闭：

```bash
# Ubuntu（ufw 防火墙）
sudo ufw disable  # 关闭
sudo ufw status  # 查看状态

# CentOS（firewalld 防火墙）
sudo systemctl stop firewalld  # 停止服务
sudo systemctl disable firewalld  # 禁止开机自启
```

## 四、开发 / 运维环境搭建（实战场景）

根据不同使用场景，搭建对应的专业环境：

### 4.1 编程开发环境（Python/Java/Go）

#### 1. Python 环境（Ubuntu/CentOS）：

Linux 自带 Python，但版本较旧，推荐使用 Anaconda 管理环境：

1. 下载 Anaconda：

   ```bash
   wget https://repo.anaconda.com/archive/Anaconda3-2023.09-0-Linux-x86_64.sh  # 下载安装包
   ```

   

2. 执行安装：

   ```bash
   bash Anaconda3-2023.09-0-Linux-x86_64.sh  # 运行安装脚本
   ```

3. 按提示操作（默认路径即可，最后选择 “yes” 添加环境变量）。

4. 验证安装：

   ```bash
   source ~/.bashrc  # 刷新环境变量
   conda --version  # 显示版本则安装成功
   ```

   

5. 创建虚拟环境：

   ```bash
   conda create -n py39 python=3.9  # 创建 Python 3.9 环境
   conda activate py39  # 激活环境
   ```

#### 2. Java 环境（JDK 17）：

1. 下载 JDK：从 [Oracle 官网](https://www.oracle.com/java/technologies/downloads/) 下载 JDK 17（Linux x64 版本）。

2. 解压并配置环境变量：

   ```bash
   # 解压到 /usr/local 目录
   sudo tar -zxvf jdk-17_linux-x64_bin.tar.gz -C /usr/local/
   # 重命名（简化路径）
   sudo mv /usr/local/jdk-17.0.9 /usr/local/jdk17
   # 编辑环境变量文件
   sudo vim /etc/profile
   ```

   

3. 在文件末尾添加：

   ```bash
   export JAVA_HOME=/usr/local/jdk17
   export PATH=$PATH:$JAVA_HOME/bin
   export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
   ```

   

4. 生效并验证：

   ```bash
   source /etc/profile  # 刷新环境变量
   java -version  # 显示版本则成功
   ```

   

#### 3. Go 环境（Go 1.21）：

1. 下载 Go 安装包：

   ```bash
   wget https://dl.google.com/go/go1.21.5.linux-amd64.tar.gz
   ```

   

2. 解压并配置环境变量：

   ```bash
   sudo tar -zxvf go1.21.5.linux-amd64.tar.gz -C /usr/local/
   sudo vim /etc/profile
   ```

   

3. 添加环境变量：

   ```bash
   export GOROOT=/usr/local/go
   export PATH=$PATH:$GOROOT/bin
   export GOPATH=$HOME/go  # 工作目录
   ```

4. 生效并验证：

   ```bash
   source /etc/profile
   go version  # 显示版本则成功
   ```

### 4.2 服务器环境（Web / 数据库）

#### 1. Nginx 服务器（静态资源 / 反向代理）：

```bash
# Ubuntu
sudo apt install -y nginx
sudo systemctl start nginx
sudo systemctl enable nginx

# CentOS
sudo dnf install -y nginx
sudo systemctl start nginx
sudo systemctl enable nginx
```

- 验证：浏览器访问服务器 IP，显示 Nginx 欢迎页则成功。
- 配置文件路径：`/etc/nginx/nginx.conf`（主配置）、`/etc/nginx/conf.d/`（自定义配置）。

#### 2. MySQL 8.0 数据库：

```bash
# Ubuntu
sudo apt install -y mysql-server
sudo systemctl start mysql
sudo systemctl enable mysql
# 初始化配置（设置 root 密码、允许远程连接等）
sudo mysql_secure_installation

# CentOS
sudo dnf install -y mysql-server
sudo systemctl start mysqld
sudo systemctl enable mysqld
# 初始化配置
sudo mysql_secure_installation
```

- 登录 MySQL：

  ```bash
  mysql -u root -p  # 输入设置的密码
  ```

- 允许远程连接（需在防火墙开放 3306 端口）：

  ```sql
  ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY '你的密码';
  FLUSH PRIVILEGES;
  ```

  

#### 3. Docker 容器化环境（推荐）：

Docker 可快速部署各类服务，避免环境冲突：

```bash
# Ubuntu/CentOS 通用安装脚本
curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun
# 启动 Docker 并设置开机自启
sudo systemctl start docker
sudo systemctl enable docker
# 配置 Docker 国内镜像（加速拉取镜像）
sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json <<-'EOF'
{
  "registry-mirrors": ["https://docker.mirrors.ustc.edu.cn", "https://hub-mirror.c.163.com"]
}
EOF
sudo systemctl daemon-reload
sudo systemctl restart docker
# 验证安装
docker --version
docker run hello-world  # 运行测试容器，成功则显示欢迎信息
```

### 4.3 网络安全学习环境（Kali Linux 专属）

Kali Linux 预装了渗透测试常用工具，需补充配置：

1. 更新工具库：

   ```bash
   sudo apt update && sudo apt full-upgrade -y
   ```

   

2. 安装额外工具（如 Metasploit 框架、Nmap 增强版）：

   ```bash
   sudo apt install -y metasploit-framework nmap sqlmap burpsuite
   ```

   

3. 配置网络代理（可选，用于渗透测试匿名性）：

   - 安装 Proxychains：

     ```bash
     sudo apt install -y proxychains4
     ```

   - 编辑配置文件：

     ```bash
     sudo vim /etc/proxychains4.conf
     ```

     

   - 末尾添加代理服务器（如 SOCKS5 代理）：

     ```plaintext
     socks5 127.0.0.1 10808
     ```

     

4. 启动工具测试：

   ```bash
   nmap -sP 192.168.1.0/24  # 扫描局域网存活主机
   msfconsole  # 启动 Metasploit 框架
   ```

   

## 五、常见问题排查

1. **U 盘启动失败**：
   - 检查 BIOS/UEFI 中是否关闭 “安全启动”（部分电脑需禁用）。
   - 重新制作启动盘（选择 “MBR” 分区类型 for BIOS，“GPT” for UEFI）。
2. **软件安装失败**：
   - 确认软件源已更新（`apt update` 或 `dnf makecache`）。
   - 检查依赖冲突（Ubuntu 用 `apt -f install` 修复，CentOS 用 `dnf install -y --allowerasing 软件名`）。
3. **SSH 无法远程连接**：
   - 检查 SSH 服务是否启动（`systemctl status sshd`）。
   - 检查防火墙是否开放 22 端口（`ufw allow 22` 或 `firewall-cmd --permanent --add-port=22/tcp`）。
   - 确认 IP 地址正确（`ip addr`），且客户端与服务器在同一局域网（或服务器有公网 IP）。
4. **权限不足**：
   - 执行命令时添加 `sudo`（临时获取 root 权限）。
   - 切换到 root 用户（`sudo -i`，谨慎使用）。

## 六、学习资源推荐

1. **基础入门**：
   - 书籍：《Linux 鸟哥的私房菜》（基础知识点全面）。
   - 视频：B 站 “尚硅谷 Linux 教程”（适合零基础）。
2. **进阶实战**：
   - 网站：[Linux 命令大全](https://man.linuxde.net/)（查询命令用法）。
   - 教程：[Docker 官方文档](https://docs.docker.com/)（容器化学习）。
3. **网络安全方向**：
   - 书籍：《Kali Linux 渗透测试实战》。
   - 平台：Hack The Box、TryHackMe（在线渗透测试练习）。

通过以上步骤，可完成 Linux 系统从安装到实战环境搭建的全流程。根据自身需求（开发、运维、安全）选择对应的环境配置，逐步深入学习 Linux 核心技能。

编辑分享





详细介绍一下在Ubuntu 22.04上安装开发环境的步骤

如何在CentOS Stream 9上配置网络和防火墙？

搭建Linux开发环境需要安装哪些必要的软件？
