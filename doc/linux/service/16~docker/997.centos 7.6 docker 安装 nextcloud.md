# centos 7.6 docker 安装 nextcloud

Nextcloud是自由及开放源代码软件，每个人都可以在私人服务器上安裝并执行它。可以使用 docker快速构建自己的 nextcloud 网盘

## 方案一

```
docker search nextcloud
docker pull docker.io/nextcloud
docker images
mkdir /home/nextcloud
chmod -R 777 nextcloud/
docker run -d --restart=always --name nextcloud -p 9001:80 -v /home/nextcloud:/data docker.io/nextcloud
```

浏览器访问9001端口，按照浏览器配置即可。

## 方案二

运行 mariadb，为 nextcloud 提供一些元数据存储

```dockerfile
docker run -d --name db_nextcloud \
       -v /var/www/nextcloud/mysqldb:/var/lib/mysql \
       -p 3307:3306 \
       -e MYSQL_ROOT_PASSWORD=nextcloud123 \
       -e MYSQL_DATABASE=nextcloud \
       -e MYSQL_USER=nextcloud \
       -e MYSQL_PASSWORD=nextcloud123 \
       mariadb

```

运行 nexcloud，–link 连接到 mariadb 容器，获取 mariadb 的一些环境变量信息.

```
docker run -d --name nextcloud \
       --link db_nextcloud:db_nextcloud \
       -p 8888:80 \
       -p 4433:443 \
       -v /var/www/nextcloud/data:/var/www/html/data \
       nextcloud
```

文档数据存储在 /var/www/nextcloud/data/admin/files 目录

打开网页 ip:8888，输入帐号密码，数据库帐号密码等

注意事项：如果部署失败需要删除容器，重新部署，记得导出 /var/www/ 目录中的重要文件，删除 /var/www/ 目录













docker-compose 的安装



docker-compose

cd /usr/local/bin/ 

chmod +x /usr/local/bin/docker-compose
docker-compose -version

shutdown -h now