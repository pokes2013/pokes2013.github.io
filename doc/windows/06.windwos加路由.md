

你希望我帮你整理这份 Windows 路由配置命令，并为每一行命令添加清晰的注释，让你能理解每条命令的作用和执行逻辑。

### 整理并添加注释后的路由配置命令

以下是整理后的完整命令，我按照逻辑顺序排列，并为每条命令添加了详细注释，同时修正了原始命令中可能存在的笔误（比如目标网段与掩码不匹配的问题）：

```cmd
@echo off
:: ==============================================
:: Windows 静态路由配置脚本
:: 功能：删除默认路由，添加特定网段静态路由，最后重置默认路由
:: 注意：需以【管理员身份】运行CMD/PowerShell执行以下命令
:: ==============================================

:: 1. 删除当前系统的默认路由（0.0.0.0/0）
:: 作用：清空原有默认网关，避免路由冲突
route delete 0.0.0.0
echo 已删除原有默认路由

:: 2. 添加10.5.0.0/16网段的永久静态路由
:: 目标网段：10.5.0.0  子网掩码：255.255.0.0  下一跳网关：192.168.80.1
:: -p 参数：表示永久路由（重启后不丢失）
route add 10.5.0.0 mask 255.255.0.0 192.168.80.1 -p
echo 已添加10.5.0.0/16网段静态路由（永久）

:: 3. 添加10.5.5.0/24网段的永久静态路由
:: 目标网段：10.5.5.0  子网掩码：255.255.255.0  下一跳网关：192.168.80.1
route add 10.5.5.0 mask 255.255.255.0 192.168.80.1 -p
echo 已添加10.5.5.0/24网段静态路由（永久）

:: 4. 打印当前所有路由表信息，用于验证配置是否生效
route print
echo 已打印当前路由表

:: 5. 再次删除默认路由（确保无残留）
route delete 0.0.0.0
echo 再次清理默认路由

:: 6. 添加新的默认路由（0.0.0.0/0）
:: 下一跳网关：10.10.30.1  -p：永久生效
route add 0.0.0.0 mask 0.0.0.0 10.10.30.1 -p
echo 已添加新的默认路由（指向10.10.30.1）

:: 7. 重新添加10.5.0.0/16网段路由（防止步骤5删除时误清）
route add 10.5.0.0 mask 255.255.0.0 192.168.80.1 -p
echo 重新确认10.5.0.0/16网段路由配置

:: 执行完成提示
echo 所有路由配置已执行完毕，请再次执行 route print 验证
pause
```

### 关键命令解释

|        命令片段        |                           核心作用                           |
| :--------------------: | :----------------------------------------------------------: |
| `route delete 0.0.0.0` |       删除系统默认路由（所有未匹配的流量默认走的网关）       |
|  `route add 目标网段`  |                    添加指定网段的静态路由                    |
|    `mask 子网掩码`     |            定义目标网段的子网掩码（决定网段范围）            |
|       `下一跳IP`       |      访问该网段时的出口网关（数据包要发往的下一个节点）      |
|          `-p`          | 标记为**永久路由**（Persistent），重启系统后路由规则不会丢失（不加则临时生效） |
|     `route print`      |           查看当前系统所有路由表，验证配置是否正确           |

### 补充说明

1. **执行前提**：必须以**管理员身份**打开 CMD 或 PowerShell，否则会提示 “拒绝访问”；
2. **网段覆盖**：`10.5.0.0/16` 已经包含了 `10.5.5.0/24` 网段，理论上只需配置前者即可，但保留后者可更精准控制；
3. **验证方法**：配置完成后执行 `route print`，在输出中查找 `10.5.0.0` 和 `0.0.0.0` 对应的网关是否正确；
4. **恢复默认**：如果配置错误，可执行 `route delete 目标网段` 删除错误路由，或重启系统（非永久路由会自动失效）。

### 总结

1. 核心逻辑：先清空默认路由 → 添加特定网段（10.5.0.0/16、10.5.5.0/24）的静态路由指向 192.168.80.1 → 重新设置默认路由指向 10.10.30.1；
2. `-p` 参数是关键，确保路由规则重启后不丢失；
3. 执行后必须用 `route print` 验证路由表，确认配置生效。



Tracert baidui.com