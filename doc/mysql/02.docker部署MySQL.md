你想通过 Docker 快速启动一个 MySQL 容器，这个需求很常见，我会一步步教你完成，包括基础启动、配置持久化和常用操作，确保容器能稳定运行且数据不丢失。

### 一、基础准备

首先确保你的机器上已经安装了 Docker，如果还没安装，可以参考官方文档，或执行以下快速安装命令（以 Linux 为例）：

```bash
# 安装 Docker（Ubuntu/Debian 系统）
sudo apt update && sudo apt install -y docker.io
# 启动 Docker 服务
sudo systemctl start docker
sudo systemctl enable docker
# 非 root 用户添加 Docker 权限（避免每次都输 sudo）
sudo usermod -aG docker $USER
# 重启终端后生效
```

### 二、启动 MySQL 容器（推荐带持久化配置）

直接启动容器如果不做数据卷挂载，容器删除后数据会丢失，因此推荐以下**生产级配置**：

#### 1. 创建数据卷（持久化 MySQL 数据）

先创建 Docker 数据卷，用于存放 MySQL 的数据和配置：

```bash
# 创建数据卷（存储 MySQL 数据）
docker volume create mysql-data
# 创建配置卷（可选，存储自定义配置）
docker volume create mysql-conf
```

注意：Docker数据卷的默认存储路径，后续如果迁移是会用到的。

> Docker管理的所有数据卷（包括你创建的 `mysql-data`、`mysql-conf`），默认都存储在宿主机的 **`/var/lib/docker/volumes/`** 目录下。针对你创建的 `mysql-data` 数据卷，具体路径是：`/var/lib/docker/volumes/mysql-data/_data`
>
> 这个 `_data` 目录就是容器内 `/var/lib/mysql`（MySQL 数据目录）的实际映射位置，MySQL 的所有数据库文件、表数据都会存在这里。

#### 2. 启动 MySQL 容器

执行以下命令启动 MySQL 容器（以 MySQL 8.0 为例，可替换为 5.7 等版本）：

```bash
docker run -d \
  --name mysql8 \  # 容器名称，自定义（如 mysql57）
  --restart always \  # 开机自启，异常退出自动重启
  -p 3306:3306 \  # 端口映射：主机 3306 端口 → 容器 3306 端口
  -e MYSQL_ROOT_PASSWORD=123456 \  # 设置 root 密码，务必修改为自己的密码
  -e MYSQL_CHARACTER_SET_SERVER=utf8mb4 \  # 设置默认字符集（支持 emoji）
  -e MYSQL_COLLATION_SERVER=utf8mb4_unicode_ci \
  -v mysql-data:/var/lib/mysql \  # 挂载数据卷到容器数据目录
  -v mysql-conf:/etc/mysql/conf.d \  # 挂载配置卷（可选）
  mysql:8.0 \  # MySQL 镜像版本，可改为 5.7、latest 等
  --default-authentication-plugin=mysql_native_password  # 兼容旧客户端认证方式
```

### 三、关键参数解释

| 参数                              | 作用                                                         |
| --------------------------------- | ------------------------------------------------------------ |
| `-d`                              | 后台运行容器（守护进程模式）                                 |
| `--name`                          | 给容器命名，方便后续操作（避免随机名称）                     |
| `--restart always`                | 容器异常退出 / 主机重启时自动重启，保证服务可用              |
| `-p 3306:3306`                    | 端口映射，主机访问 `localhost:3306` 即可连接容器内 MySQL     |
| `-e MYSQL_ROOT_PASSWORD`          | 必选参数，设置 root 用户密码（**务必修改为强密码**）         |
| `-v mysql-data:/var/lib/mysql`    | 数据卷挂载，将容器内 MySQL 数据目录映射到主机，容器删除后数据不丢 |
| `--default-authentication-plugin` | MySQL 8.0 默认认证方式为 `caching_sha2_password`，此参数改为旧版 `mysql_native_password`，兼容 Navicat、Python 等客户端 |

### 四、常用操作

#### 1. 检查容器是否运行

```bash
docker ps  # 查看运行中的容器，能看到 mysql8 即为成功
# 若未运行，查看日志排查问题
docker logs mysql8
```

#### 2. 进入容器内操作 MySQL

```bash
docker exec -it mysql8 mysql -uroot -p
# 输入你设置的密码（如 123456），即可进入 MySQL 命令行
# 示例：创建数据库
CREATE DATABASE test_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

#### 3. 停止 / 启动 / 删除容器



```bash
# 停止容器
docker stop mysql8
# 启动容器
docker start mysql8
# 删除容器（数据卷仍保留，数据不丢）
docker rm mysql8
# 若需删除数据卷（谨慎！会清空所有数据）
docker volume rm mysql-data
```

#### 4. 外部客户端连接

- 主机：`localhost` 或服务器 IP
- 端口：`3306`
- 用户名：`root`
- 密码：你设置的 `MYSQL_ROOT_PASSWORD`

### 总结

1. 启动 MySQL 容器核心是**端口映射**+**密码设置**+**数据卷持久化**，避免数据丢失；
2. MySQL 8.0 需添加 `--default-authentication-plugin` 参数兼容旧客户端；
3. `--restart always` 是生产环境必备，保证容器异常时自动恢复。

如果需要自定义 MySQL 配置（如修改最大连接数、超时时间），可以在 `mysql-conf` 数据卷中创建 `my.cnf` 文件，重启容器即可生效。